#!/bin/bash

# initializing
make-cadir /etc/openvpn/ca
cd /etc/openvpn/ca
./easyrsa init-pki

# configure easyrsa
echo 'set_var EASYRSA_BATCH "1"
set_var EASYRSA_KEY_SIZE 4096
#  options: rsa,ec
set_var EASYRSA_ALGO rsa
# days, equals 10 years
set_var EASYRSA_CA_EXPIRE 3650
#  days, equals 1 year
set_var EASYRSA_CERT_EXPIRE 365
#  options: md5,sha1,sha256,sha224,sha384,sha512
set_var EASYRSA_DIGEST "sha512"' > /etc/openvpn/ca/vars
echo "vars created/overwritten"

# create ca
./easyrsa build-ca nopass
echo "CA created"

# create dh
./easyrsa gen-dh
echo "DH created"
